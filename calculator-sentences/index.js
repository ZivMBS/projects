const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),input=document.getElementsByTagName("input")[0],inputLeet=document.getElementsByTagName("input")[1],tileSize=6,buttons=new Image;let cursor=[tileSize,tileSize],translation=0,dictionary=[{key:"A",value:["IpUY/jGI"],input:[0,2],regex:/A/},{key:"B",value:["9GMfRjHw"],input:[0,3],regex:/[Bb]/},{key:"C",value:["dGEIQhFw"],input:[0,4],regex:/[Cc]/},{key:"D",value:["5KMYxjLg"],input:[0,5],regex:/[Dd]/},{key:"E",value:["/CEPQhD4"],input:[0,6],regex:/E/},{key:"F",value:["/CEPQhCA"],input:[0,7],regex:/[Ff]/},{key:"G",value:["dGELxjNo"],input:[1,24,20,26],regex:/G/},{key:"L",value:["AIRCIRD4"],input:[1,2],regex:/L/},{key:"M",value:["jHe61jGI"],input:[0,10],regex:/[Mm]/},{key:"O",value:["dGMYxjFw"],input:[17],regex:/[Oo]/},{key:"P",value:["9nOfYxjA"],input:[1,29],regex:/[Pp]/},{key:"R",value:["9GMfUlKI"],input:[1,24,19,24],regex:/[Rr]/},{key:"S",value:["/CHohDFw"],input:[22],regex:/[Ss]/},{key:"X",value:["jFRCKVGI"],input:[0,8],regex:/[Xx]/},{key:"Y",value:["jFSiEIQg"],input:[0,9],regex:/[Yy]/},{key:"Z",value:["dGIRERD4"],input:[19],regex:/[Zz]/},{key:"a",value:["ABNZSlZI"],input:[1,24,18,17],regex:/a/},{key:"e",value:["AB0Y/hFw"],input:[1,24,19,20],regex:/e/},{key:"g",value:["AB8YxeFw"],input:[1,24,20,22],regex:/g/},{key:"h",value:["hCFsxjGI"],input:[1,24,17,23],regex:/[Hh]/},{key:"i",value:["AwHGMYzw"],input:[11],regex:/[Ii]/},{key:"k",value:["hCMqYpKI"],input:[1,24,19,22],regex:/[Kk]/},{key:"l",value:["IwhCEIRw"],input:[18],regex:/l/},{key:"t",value:["QjyEIQkw"],input:[1,24,20,25],regex:/[Tt]/},{key:"u",value:["ACMYxjNo"],input:[1,24,18,24],regex:/[Uu]/},{key:"mp",value:["ADVa1rWo","AAHox9CA"],input:[1,24,17,18],regex:/mp/},{key:"mn",value:["ADVa1rWo","AAFsxjGI"],input:[1,24,17,19],regex:/[Mm][Nn]/},{key:"me",value:["ADVa1rWo","AB0Y/hFw"],input:[1,24,17,20],regex:/me/},{key:"ao",value:["AB0TpjNo","AADoxjFw"],input:[1,24,17,22],regex:/ao/},{key:"re",value:["AC2YQhCA","AB0Y/hFw"],input:[1,24,18,18],regex:/re/},{key:"NA",value:["jnNaznGI","AADox/GI"],input:[1,24,19,21],regex:/[Nn][Aa]/},{key:"Vm",value:["jGMVKUQg","ADVa1rWo"],input:[1,24,19,23],regex:/[Vv][Mm]/},{key:"co",value:["AB0YQhFw","AADoxjFw"],input:[1,24,19,25],regex:/co/},{key:"Go",value:["dGELxjNo","AADoxjFw"],input:[1,24,20,23],regex:/Go/},{key:"Zo",value:["+EQiIRD4","AADoxjFw"],input:[1,24,20,24],regex:/[Zz][Oo]/},{key:"atm",value:["AB0TpjNo","QjyEIQkw","ADVa1rWo"],input:[1,24,21,17],regex:/a[Tt]m/},{key:"Ans",value:["IpUY/jGI","AC2YxjGI","AB0YODFw"],input:[27],regex:/[Aa][Nn][Ss]/},{key:"0",value:["dGMYxjFw"],input:[17],regex:/0/},{key:"1",value:["IwhCEIRw"],input:[18],regex:/1/},{key:"2",value:["dGIRERD4"],input:[19],regex:/2/},{key:"3",value:["dGITBjFw"],input:[20],regex:/3/},{key:"4",value:["EYylS+IQ"],input:[21],regex:/4/},{key:"5",value:["/CHohDFw"],input:[22],regex:/5/},{key:"6",value:["MiEPRjFw"],input:[23],regex:/6/},{key:"7",value:["/EIhCIQg"],input:[24],regex:/7/},{key:"8",value:["dGMXRjFw"],input:[25],regex:/8/},{key:"9",value:["dGMXhCJg"],input:[26],regex:/9/},{key:"(",value:["ERCEIQQQ"],input:[12],regex:/\(/},{key:")",value:["QQQhCERA"],input:[8],regex:/\)/},{key:"-",value:["AAAPgAAA"],input:[31],regex:/-/},{key:" ",value:["AAAHAAAA"],input:[2],regex:/ /},{key:":",value:["AxgAMYAA"],input:[0,13],regex:/:/},{key:".",value:["AAAAAAxg"],input:[28],regex:/\./},{key:",",value:["AAAAMYRA"],input:[1,8],regex:/,/},{key:"!",value:["IQhCEAQg"],input:[1,15],regex:/!/},{key:"+",value:["AAhPkIAA"],input:[30],regex:/\+/},{key:"=",value:["AAHwfAAA"],input:[0,14],regex:/=/},{key:"%",value:["ADGRERMY"],input:[1,12],regex:/%/},{key:"/{",value:["GIQhEISjCA"],input:[16],regex:/\/{/}];function updateDisplay(){ctx.clearRect(0,0,canvas.width+6*tileSize*99,canvas.height),generate(input.value,ctx)}buttons.src="imgs/buttons.png",window.onload=(()=>{input.value="Type text here.",inputLeet.checked=!0,generate(input.value,ctx),generateLetters(),drawLogo()}),input.addEventListener("input",updateDisplay),inputLeet.addEventListener("change",updateDisplay);const modal_bg=document.getElementsByClassName("modal-bg")[0];document.getElementsByClassName("close-modal")[0].addEventListener("click",()=>{modal_bg.style.display="none"}),document.getElementsByClassName("open-modal")[0].addEventListener("click",()=>{modal_bg.style.display="block"}),modal_bg.addEventListener("click",e=>{"modal-bg"==e.target.classList[0]&&(modal_bg.style.display="none")}),window.addEventListener("keydown",e=>{27==e.keyCode&&(modal_bg.style.display="none",view_in_calc_bg.style.display="none"),37==e.keyCode&&translation-tileSize>=0&&(ctx.clearRect(0,0,canvas.width+6*tileSize*99,canvas.height),translation-=6*tileSize,ctx.translate(6*tileSize,0),ctx.save(),generate(input.value,ctx)),39==e.keyCode&&translation<=6*tileSize*(parseText(input.value).join("").replace(/{|}/g,"").length-17)&&(ctx.clearRect(0,0,canvas.width+6*tileSize*99,canvas.height),translation+=6*tileSize,ctx.translate(6*-tileSize,0),ctx.save(),generate(input.value,ctx))});const view_in_calc_bg=document.getElementsByClassName("modal-bg")[1];function generate(e,t){cursor[0]=tileSize;let n=parseText(e),a=null!=e.match(/\/\{/),i=!1;if(null!=n){a&&(cursor[1]=3*tileSize);for(let e of n)if("/{"==e)i=!0,cursor[1]=tileSize,drawCharacter(base64tobin(["GIQhEISjCA"]),t),cursor[1]=3*tileSize;else if("}"==e)i=!1;else{let n;for(let t of dictionary)null!==e.match(t.regex)&&e.length<=t.key.length&&(n=t);if(findInDictionary(n.key,!0)){let e=findInDictionary(n.key,!0);for(let n in e.key)drawCharacter(base64tobin([e.value[n]]),t,i)}else if(findInDictionary(n.key)){let e=findInDictionary(n.key);for(let a in e.key)drawCharacter(base64tobin(findInDictionary(n.key[a]).value),t,i)}}}return cursor[1]=tileSize,n}function drawCharacter(e,t,n){if(n){let e=[cursor[0],cursor[1]];cursor[1]=tileSize,t.fillRect(cursor[0]-tileSize,cursor[1],6*tileSize,tileSize),cursor[1]=e[1],cursor[0]-=tileSize}for(let n=0;n<11;n++)for(let a=0;a<5;a++)"1"==e[5*n+a]&&t.fillRect(cursor[0]+a*tileSize,cursor[1]+n*tileSize,tileSize,tileSize);n&&(cursor[0]+=tileSize),cursor[0]+=6*tileSize}function parseText(e){let t;return t=inputLeet.checked?/a[Tt]m|[Aa][Nn][Ss]|m[pe]|[Mm][Nn]|re|[Nn][Aa]|[Vv][Mm]|[acG]o|[Zz][Oo]|[A-GLMOPRXYaeghiktu]|[a-gmoprxyAEGHIKTU]|[0-9]|[.,\-:!+=()% ]|[SsZzl]|\/\{|\}/g:/a[Tt]m|[Aa][Nn][Ss]|m[pe]|[Mm][Nn]|re|[Nn][Aa]|[Vv][Mm]|[acG]o|[Zz][Oo]|[A-GLMOPRXYaeghiktu]|[a-gmoprxyAEGHIKTU]|[0-9]|[.,\-:!+=()% ]|\/\{|\}/g,e.match(t)}function base64tobin(e){let t=e.join(""),n="";for(let e of t)e.match(/[A-Z]/)&&(n+=(e.charCodeAt()-65).toString(2).padStart(6,"0")),e.match(/[a-z]/)&&(n+=(e.charCodeAt()-71).toString(2).padStart(6,"0")),e.match(/[0-9]/)&&(n+=(e.charCodeAt()+4).toString(2).padStart(6,"0")),"+"==e&&(n+="111110"),"/"==e&&(n+="111111");return n}function findInDictionary(e,t=!1){let n;if(t)for(let t of dictionary)n=dictionary.find(t=>t.key==e);else for(let t of dictionary)e==t.key?n=dictionary.find(t=>t.key==e):e.toLowerCase()==t.key.toLowerCase()&&(n=dictionary.find(t=>t.key.toLowerCase()==e.toLowerCase()));return n}function generateLetter(e){let t=document.createElement("canvas"),n=t.getContext("2d");t.width=19*tileSize,t.height=11*tileSize;let a=findInDictionary(e);generate(a.key,n);let i=document.createElement("div");i.classList.add("letter"),i.appendChild(t);let l=document.createElement("div");i.appendChild(l);for(let e=0;e<a.input.length;e++){let t=a.input[e],n=document.createElement("canvas");if(n.width=68,n.height=60,n.getContext("2d").drawImage(buttons,68*t,0,68,60,0,0,68,60),l.appendChild(n),e!=a.input.length-1){let e=document.createElement("span");e.innerText=" + ",l.appendChild(e)}}return i}function generateLetters(){for(let e of dictionary)if("S"!=e.key&&"Z"!=e.key&&"l"!=e.key){let t=generateLetter(e.key);document.getElementsByClassName("modal")[0].appendChild(t)}}function addHowToWrite(){let e=document.getElementsByClassName("modal")[1];for(;e.children.length>1;)e.removeChild(e.children[1]);let t=parseText(input.value);if(null!=t)for(let e of t)if("}"!=e){let t=generateLetter(e);document.getElementsByClassName("modal")[1].appendChild(t)}}function drawLogo(){let e=document.getElementById("logo").getContext("2d");generate("CASIO CALCULATOR",e),cursor[1]+=11*tileSize,generate("Letter SIMULATOR",e),cursor[1]=tileSize}document.getElementsByClassName("close-modal")[1].addEventListener("click",()=>{view_in_calc_bg.style.display="none"}),document.getElementsByClassName("view-in-calc")[0].addEventListener("click",()=>{view_in_calc_bg.style.display="block",addHowToWrite()}),view_in_calc_bg.addEventListener("click",e=>{"modal-bg"==e.target.classList[0]&&(view_in_calc_bg.style.display="none")});
