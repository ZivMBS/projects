const canvas=document.getElementById("canvas"),input=document.getElementsByTagName("input")[0],button=document.getElementsByTagName("button")[0],ctx=canvas.getContext("2d"),dimensions=[96,31],tileSize=canvas.clientWidth/dimensions[0];let cursor=tileSize;const regexDictionary=[{k:"A",r:/A/},{k:"B",r:/[Bb]/},{k:"C",r:/[Cc]/},{k:"D",r:/[Dd]/},{k:"E",r:/E/},{k:"F",r:/[Ff]/},{k:"G",r:/G/},{k:"L",r:/L/},{k:"M",r:/[Mm]/},{k:"O",r:/[Oo]/},{k:"P",r:/[Pp]/},{k:"R",r:/[Rr]/},{k:"X",r:/[Xx]/},{k:"Y",r:/[Yy]/},{k:"a",r:/a/},{k:"e",r:/e/},{k:"g",r:/g/},{k:"h",r:/[Hh]/},{k:"i",r:/[Ii]/},{k:"k",r:/[Kk]/},{k:"t",r:/[Tt]/},{k:"u",r:/[Uu]/},{k:"mp",r:/mp/},{k:"mn",r:/[Mm][Nn]/},{k:"me",r:/me/},{k:"ao",r:/ao/},{k:"re",r:/re/},{k:"NA",r:/[Nn][Aa]/},{k:"Vm",r:/[Vv][Mm]/},{k:"Co",r:/[Cc][Oo]/},{k:"Go",r:/Go/},{k:"Zo",r:/[Zz][Oo]/},{k:"atm",r:/a[Tt]m/},{k:"atM",r:/a[Tt]M/},{k:"AtM",r:/A[Tt][Mm]/},{k:"Ans",r:/[Aa][Nn][Ss]/},{k:"0",r:/0/},{k:"1",r:/[l1]/},{k:"2",r:/[Zz2]/},{k:"3",r:/3/},{k:"4",r:/4/},{k:"5",r:/[Ss5]/},{k:"6",r:/6/},{k:"7",r:/7/},{k:"8",r:/8/},{k:"9",r:/9/},{k:")",r:/\)/},{k:"(",r:/\(/},{k:":",r:/:/},{k:".",r:/\./},{k:",",r:/,/},{k:"!",r:/!/},{k:"-",r:/[\- ]/}],dictionary=[{k:"A",v:"IpUY/jGI"},{k:"B",v:"9GMfRjHw"},{k:"C",v:"dGEIQhFw"},{k:"D",v:"5KMYxjLg"},{k:"E",v:"/CEPQhD4"},{k:"F",v:"/CEPQhCA"},{k:"G",v:"dGELxjNo"},{k:"L",v:"AIRCIRD4"},{k:"M",v:"jHe61jGI"},{k:"O",v:"dGMYxjFw"},{k:"P",v:"9nOfYxjA"},{k:"R",v:"9GMfUlKI"},{k:"X",v:"jFRCKVGI"},{k:"Y",v:"jFSiEIQg"},{k:"a",v:"ABNZSlZI"},{k:"e",v:"AB0Y/hFw"},{k:"g",v:"AB8YxeFw"},{k:"h",v:"hCFsxjGI"},{k:"i",v:"AwHGMYzw"},{k:"k",v:"hCMqYpKI"},{k:"t",v:"QjyEIQkw"},{k:"u",v:"ACMYxjNo"},{k:"mp",v:["ADVa1rWo","AAHox9CA"]},{k:"mn",v:["ADVa1rWo","AAFsxjGI"]},{k:"me",v:["ADVa1rWo","AB0Y/hFw"]},{k:"ao",v:["AB0TpjNo","AADoxjFw"]},{k:"re",v:["AC2YQhCA","AB0Y/hFw"]},{k:"NA",v:["jnNaznGI","AADox/GI"]},{k:"Vm",v:["jGMVKUQg","ADVa1rWo"]},{k:"Co",v:["AB0YQhFw","AADoxjFw"]},{k:"Go",v:["dGELxjNo","AADoxjFw"]},{k:"Zo",v:["+EQiIRD4","AADoxjFw"]},{k:"atm",v:["AB0TpjNo","QjyEIQkw","ADVa1rWo"]},{k:"Ans",v:["IpUY/jGI","AC2YxjGI","AB0YODFw"]},{k:"0",v:"dGMYxjFw"},{k:"1",v:"IwhCEIRw"},{k:"2",v:"dGIRERD4"},{k:"3",v:"dGITBjFw"},{k:"4",v:"EYylS+IQ"},{k:"5",v:"/CHohDFw"},{k:"6",v:"MiEPRjFw"},{k:"7",v:"/EIhCIQg"},{k:"8",v:"dGMXRjFw"},{k:"9",v:"dGMXhCJg"},{k:"(",v:"ERCEIQQQ"},{k:")",v:"QQQhCERA"},{k:"-",v:"AAAPgAAA"},{k:" ",v:"AAAPgAAA"},{k:":",v:"AxgAMYAA"},{k:".",v:"AAAAAAxg"},{k:",",v:"AAAAMYRA"},{k:"!",v:"IQhCEAQg"}];button.addEventListener("click",()=>{generate(input.v.trim())}),input.addEventListener("keydown",a=>{13!=a.kCode||generate(input.v.trim())});function generate(a){ctx.clearRect(0,0,canvas.clientWidth,canvas.clientHeight),cursor=tileSize;let b=/([Aa][Tt][Mm]|[Aa][Nn][Ss])|(m[pe]|[Mm][Nn]|re|[Nn][Aa]|[Vv][Mm]|[acG]o|[Zz][Oo])|([A-GLMOPRXYaeghiktu])|([a-gmoprxyAEGHIKTU])|([0-9])|([.,\-:()! ])|([SsZzl])/g,c=a.match(b);if(null!==c)for(let a of c){let b;for(let c of regexDictionary)null!==a.match(c.r)&&a.length<=c.k.length&&(b=c);if(findInDictionary(b.k,!0)){let a=findInDictionary(b.k,!0);if(1<a.k.length)for(let b in a.k)drawCharacter(base64tobin(a.v[b]));else drawCharacter(base64tobin(a.v))}else if(findInDictionary(b.k)){let a=findInDictionary(b.k);for(let c in a.k)drawCharacter(base64tobin(findInDictionary(b.k[c]).v))}}}function drawCharacter(a){for(let b=0;9>b;b++)for(let c=0;5>c;c++)"0"!=a[5*b+c]&&ctx.fillRect(cursor+c*tileSize,(b+1)*tileSize,tileSize,tileSize);cursor+=6*tileSize}function findInDictionary(a,b=!1){let c;if(b)for(let b=0;b<dictionary.length;b++)c=dictionary.find(b=>b.k==a);else for(let b of dictionary)a==b.k?c=dictionary.find(b=>b.k==a):a.toLowerCase()==b.k.toLowerCase()&&(c=dictionary.find(b=>b.k.toLowerCase()==a.toLowerCase()));return c}function base64tobin(a){let b=/[A-Z]|[a-z]|[0-9]|[/+]/g,c=a.match(b).join(""),d="";for(let b of c)b.match(/[A-Z]/)&&(d+=(b.charCodeAt()-65).toString(2).padStart(6,"0")),b.match(/[a-z]/)&&(d+=(b.charCodeAt()-71).toString(2).padStart(6,"0")),b.match(/[0-9]/)&&(d+=(b.charCodeAt()+4).toString(2).padStart(6,"0")),"+"==b&&(d+="111110"),"/"==b&&(d+="111111");return d}
