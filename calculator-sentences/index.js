const canvas=document.querySelector("#canvas"),ctx=canvas.getContext("2d"),input=document.querySelectorAll("input")[0],inputLeet=document.querySelectorAll("input")[1],tileSize=6,buttons=new Image;let cursor=[tileSize,tileSize],translation=0,dictionary=[{k:"A",v:["IpUY/jGI"],i:[0,2],r:/A/},{k:"B",v:["9GMfRjHw"],i:[0,3],r:/[Bb]/},{k:"C",v:["dGEIQhFw"],i:[0,4],r:/[Cc]/},{k:"D",v:["5KMYxjLg"],i:[0,5],r:/[Dd]/},{k:"E",v:["/CEPQhD4"],i:[0,6],r:/E/},{k:"F",v:["/CEPQhCA"],i:[0,7],r:/[Ff]/},{k:"G",v:["dGELxjNo"],i:[1,24,20,26],r:/G/},{k:"L",v:["AIRCIRD4"],i:[1,2],r:/L/},{k:"M",v:["jHe61jGI"],i:[0,10],r:/[Mm]/},{k:"O",v:["dGMYxjFw"],i:[17],r:/[Oo]/},{k:"P",v:["9nOfYxjA"],i:[1,29],r:/[Pp]/},{k:"R",v:["9GMfUlKI"],i:[1,24,19,24],r:/[Rr]/},{k:"S",v:["/CHohDFw"],i:[22],r:/[Ss]/},{k:"X",v:["jFRCKVGI"],i:[0,8],r:/[Xx]/},{k:"Y",v:["jFSiEIQg"],i:[0,9],r:/[Yy]/},{k:"Z",v:["dGIRERD4"],i:[19],r:/[Zz]/},{k:"a",v:["ABNZSlZI"],i:[1,24,18,17],r:/a/},{k:"e",v:["AB0Y/hFw"],i:[1,24,19,20],r:/e/},{k:"g",v:["AB8YxeFw"],i:[1,24,20,22],r:/g/},{k:"h",v:["hCFsxjGI"],i:[1,24,17,23],r:/[Hh]/},{k:"i",v:["AwHGMYzw"],i:[11],r:/[Ii]/},{k:"k",v:["hCMqYpKI"],i:[1,24,19,22],r:/[Kk]/},{k:"l",v:["IwhCEIRw"],i:[18],r:/l/},{k:"t",v:["QjyEIQkw"],i:[1,24,20,25],r:/[Tt]/},{k:"u",v:["ACMYxjNo"],i:[1,24,18,24],r:/[Uu]/},{k:"mp",v:["ADVa1rWo","AAHox9CA"],i:[1,24,17,18],r:/mp/},{k:"mn",v:["ADVa1rWo","AAFsxjGI"],i:[1,24,17,19],r:/[Mm][Nn]/},{k:"me",v:["ADVa1rWo","AB0Y/hFw"],i:[1,24,17,20],r:/me/},{k:"ao",v:["AB0TpjNo","AADoxjFw"],i:[1,24,17,22],r:/ao/},{k:"re",v:["AC2YQhCA","AB0Y/hFw"],i:[1,24,18,18],r:/re/},{k:"NA",v:["jnNaznGI","AADox/GI"],i:[1,24,19,21],r:/[Nn][Aa]/},{k:"Vm",v:["jGMVKUQg","ADVa1rWo"],i:[1,24,19,23],r:/[Vv][Mm]/},{k:"co",v:["AB0YQhFw","AADoxjFw"],i:[1,24,19,25],r:/co/},{k:"Go",v:["dGELxjNo","AADoxjFw"],i:[1,24,20,23],r:/Go/},{k:"Zo",v:["+EQiIRD4","AADoxjFw"],i:[1,24,20,24],r:/[Zz][Oo]/},{k:"atm",v:["AB0TpjNo","QjyEIQkw","ADVa1rWo"],i:[1,24,21,17],r:/a[Tt]m/},{k:"Ans",v:["IpUY/jGI","AC2YxjGI","AB0YODFw"],i:[27],r:/[Aa][Nn][Ss]/},{k:"0",v:["dGMYxjFw"],i:[17],r:/0/},{k:"1",v:["IwhCEIRw"],i:[18],r:/1/},{k:"2",v:["dGIRERD4"],i:[19],r:/2/},{k:"3",v:["dGITBjFw"],i:[20],r:/3/},{k:"4",v:["EYylS+IQ"],i:[21],r:/4/},{k:"5",v:["/CHohDFw"],i:[22],r:/5/},{k:"6",v:["MiEPRjFw"],i:[23],r:/6/},{k:"7",v:["/EIhCIQg"],i:[24],r:/7/},{k:"8",v:["dGMXRjFw"],i:[25],r:/8/},{k:"9",v:["dGMXhCJg"],i:[26],r:/9/},{k:"(",v:["ERCEIQQQ"],i:[12],r:/\(/},{k:")",v:["QQQhCERA"],i:[8],r:/\)/},{k:"-",v:["AAAPgAAA"],i:[31],r:/-/},{k:" ",v:["AAAHAAAA"],i:[2],r:/ /},{k:":",v:["AxgAMYAA"],i:[0,13],r:/:/},{k:".",v:["AAAAAAxg"],i:[28],r:/\./},{k:",",v:["AAAAMYRA"],i:[1,8],r:/,/},{k:"!",v:["IQhCEAQg"],i:[1,15],r:/!/},{k:"+",v:["AAhPkIAA"],i:[30],r:/\+/},{k:"=",v:["AAHwfAAA"],i:[0,14],r:/=/},{k:"%",v:["ADGRERMY"],i:[1,12],r:/%/},{k:"/{",v:["GIQhEISjCA"],i:[16],r:/\/{/}];function updateDisplay(){ctx.clearRect(0,0,canvas.width+6*tileSize*99,canvas.height),generate(input.value,ctx)}buttons.src="imgs/buttons.png",window.onload=(()=>{input.value="Type text here.",inputLeet.checked=!0,generate(input.value,ctx),generateLetters(),drawLogo()}),input.addEventListener("input",updateDisplay),inputLeet.addEventListener("change",updateDisplay);const modal_bg=document.querySelector(".modal-bg");document.querySelector(".close-modal").addEventListener("click",()=>{modal_bg.style.display="none"}),document.querySelector(".open-letters").addEventListener("click",()=>{modal_bg.style.display="flex"}),modal_bg.addEventListener("click",e=>{"modal-bg"==e.target.classList[0]&&(modal_bg.style.display="none")}),window.addEventListener("keydown",e=>{"Escape"==e.key&&(modal_bg.style.display="none",view_in_calc_bg.style.display="none"),"ArrowLeft"==e.key&&translation-tileSize>=0&&(ctx.clearRect(0,0,canvas.width+6*tileSize*99,canvas.height),translation-=6*tileSize,ctx.translate(6*tileSize,0),ctx.save(),generate(input.value,ctx)),"ArrowRight"==e.key&&translation<=6*tileSize*(parseText(input.value).join("").replace(/{|}/g,"").length-17)&&(ctx.clearRect(0,0,canvas.width+6*tileSize*99,canvas.height),translation+=6*tileSize,ctx.translate(6*-tileSize,0),ctx.save(),generate(input.value,ctx))});const view_in_calc_bg=document.querySelectorAll(".modal-bg")[1];function generate(e,t){cursor[0]=tileSize;let i=parseText(e),r=null!=e.match(/\/\{/),n=!1;if(null!=i){r&&(cursor[1]=3*tileSize);for(let e of i)if("/{"==e)n=!0,cursor[1]=tileSize,drawCharacter(base64tobin(["GIQhEISjCA"]),t),cursor[1]=3*tileSize;else if("}"==e)n=!1;else{let i;for(let t of dictionary)null!==e.match(t.r)&&e.length<=t.k.length&&(i=t);if(findInDictionary(i.k,!0)){let e=findInDictionary(i.k,!0);for(let i in e.k)drawCharacter(base64tobin([e.v[i]]),t,n)}else if(findInDictionary(i.k)){let e=findInDictionary(i.k);for(let r in e.k)drawCharacter(base64tobin(findInDictionary(i.k[r]).v),t,n)}}}return cursor[1]=tileSize,i}function drawCharacter(e,t,i){if(i){let e=[cursor[0],cursor[1]];cursor[1]=tileSize,t.fillRect(cursor[0]-tileSize,cursor[1],6*tileSize,tileSize),cursor[1]=e[1],cursor[0]-=tileSize}for(let i=0;i<11;i++)for(let r=0;r<5;r++)"1"==e[5*i+r]&&t.fillRect(cursor[0]+r*tileSize,cursor[1]+i*tileSize,tileSize,tileSize);i&&(cursor[0]+=tileSize),cursor[0]+=6*tileSize}function parseText(e){let t;return t=inputLeet.checked?/a[Tt]m|[Aa][Nn][Ss]|m[pe]|[Mm][Nn]|re|[Nn][Aa]|[Vv][Mm]|[acG]o|[Zz][Oo]|[A-GLMOPRXYaeghiktu]|[a-gmoprxyAEGHIKTU]|[0-9]|[.,\-:!+=()% ]|[SsZzl]|\/\{|\}/g:/a[Tt]m|[Aa][Nn][Ss]|m[pe]|[Mm][Nn]|re|[Nn][Aa]|[Vv][Mm]|[acG]o|[Zz][Oo]|[A-GLMOPRXYaeghiktu]|[a-gmoprxyAEGHIKTU]|[0-9]|[.,\-:!+=()% ]|\/\{|\}/g,e.match(t)}function base64tobin(e){let t=e.join(""),i="";for(let e of t)e.match(/[A-Z]/)&&(i+=(e.charCodeAt()-65).toString(2).padStart(6,"0")),e.match(/[a-z]/)&&(i+=(e.charCodeAt()-71).toString(2).padStart(6,"0")),e.match(/[0-9]/)&&(i+=(e.charCodeAt()+4).toString(2).padStart(6,"0")),"+"==e&&(i+="111110"),"/"==e&&(i+="111111");return i}function findInDictionary(e,t=!1){let i;if(t)for(let t of dictionary)i=dictionary.find(t=>t.k==e);else for(let t of dictionary)e==t.k?i=dictionary.find(t=>t.k==e):e.toLowerCase()==t.k.toLowerCase()&&(i=dictionary.find(t=>t.k.toLowerCase()==e.toLowerCase()));return i}function generateLetter(e){let t=document.createElement("canvas"),i=t.getContext("2d");t.width=19*tileSize,t.height=11*tileSize;let r=findInDictionary(e);generate(r.k,i);let n=document.createElement("div");n.classList.add("letter"),n.appendChild(t);let a=document.createElement("div");n.appendChild(a);for(let e=0;e<r.i.length;e++){let t=r.i[e],i=document.createElement("canvas");if(i.width=68,i.height=60,i.getContext("2d").drawImage(buttons,68*t,0,68,60,0,0,68,60),a.appendChild(i),e!=r.i.length-1){let e=document.createElement("span");e.innerText=" + ",a.appendChild(e)}}return n}function generateLetters(){for(let e of dictionary)if("S"!=e.k&&"Z"!=e.k&&"l"!=e.k){let t=generateLetter(e.k);document.querySelector(".modal").appendChild(t)}}function addHowToWrite(){let e=document.querySelectorAll(".modal")[1];for(;e.children.length>1;)e.removeChild(e.children[1]);let t=parseText(input.value);if(null!=t)for(let i of t)if("}"!=i){let t=generateLetter(i);e.appendChild(t)}}function drawLogo(){let e=document.querySelector("#logo").getContext("2d");generate("CASIO CALCULATOR",e),cursor[1]+=11*tileSize,generate("Letter SIMULATOR",e),cursor[1]=tileSize}document.querySelectorAll(".close-modal")[1].addEventListener("click",()=>{view_in_calc_bg.style.display="none"}),document.querySelector(".view-in-calc").addEventListener("click",()=>{view_in_calc_bg.style.display="flex",addHowToWrite()}),view_in_calc_bg.addEventListener("click",e=>{"modal-bg"==e.target.classList[0]&&(view_in_calc_bg.style.display="none")});
